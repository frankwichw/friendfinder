<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>
		Survey
	</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	
</head>
<body>
<!-- match modal -->
<div class="modal fade" id="mymodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Your Match!</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<!-- body goes here -->
				<h1 id='match-name'></h1>
				<img src='' id='match-photo' width='400'>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div class='container'>
	<h1>Survey Questions</h1>
	<hr>
	<h2>About You</h2>
<form>
	<h4>Name (Required)</h4>
	<input id='your-name' type='text' class='form-control'>
	<h4>Link to photo image (Required)</h4>
	<input id='your-photo' type='text' class='form-control'>
	<hr>
	<h2>Question 1</h2>
	<h4>You have a favorite spot to sit in your house.</h4>
	<select class='chosen-select' id='q1'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 2</h2>
	<h4>Nothing bothers you more than a disrupted routine.</h4>
	<select class='chosen-select' id='q2'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 3</h2>
	<h4>You find it easy to stay relaxed even when there are guests in your house.</h4>
	<select class='chosen-select' id='q3'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 4</h2>
	<h4>You value hygiene.</h4>
	<select class='chosen-select' id='q4'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 5</h2>
	<h4>You respond well to positive reinforcement.</h4>
	<select class='chosen-select' id='q5'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 6</h2>
	<h4>You rarely bring dead animals into the house, and when you do, you don't leave them on the floor.</h4>
	<select class='chosen-select' id='q6'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 7</h2>
	<h4>You are an affectionate person.</h4>
	<select class='chosen-select' id='q7'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 8</h2>
	<h4>You are nocturnal.</h4>
	<select class='chosen-select' id='q8'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 9</h2>
	<h4>Politics do not interest you.</h4>
	<select class='chosen-select' id='q9'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
	<h2>Question 10</h2>
	<h4>You keep knocking over my laundry hamper and using it like a little cave.</h4>
	<select class='chosen-select' id='q10'>
		<option value></option>
		<option value='1'> 1 (Strongly disagree)</option>
		<option value='2'> 2 </option>
		<option value='3'> 3 </option>
		<option value='4'> 4 </option>
		<option value='5'> 5 (Strongly agree)</option>
	</select>
</form>
	<hr>
	<button type='submit' class='btn btn-lg btn-primary btn-block' id='submit'>Submit</button>
	<hr>
	<footer class='footer'>
		<a href='/api/friends'>API Friends List</a> | <a href='https://github.com/frankwichw/friendfinder'>GitHub Repo</a>
	</footer>
</div>

<script>
	// on submit button click, make an object out of the data that we 
	$("#submit").on("click", function(event) {
	// preventing default (page reload)  
	event.preventDefault();
	// i'm sure there's a better way to validate this form but here i am :)
	if ($("#your-name").val().length < 1 || $("#your-photo").val().length < 1 || $("#q1").val().length < 1 || $("#q2").val().length < 1 || $("#q3").val().length < 1 || $("#q4").val().length < 1 || $("#q5").val().length < 1 || $("#q6").val().length < 1 || $("#q7").val().length < 1 || $("#q8").val().length < 1 || $("#q9").val().length < 1 || $("#q10").val().length < 1){
		alert("Please fill in all form fields!");
	} else {
		// creating object out of user's input
		var newFriend = {
        name: $("#your-name").val().trim(),
        photo: $("#your-photo").val().trim(),
		scores: [
			$("#q1").val(),
			$("#q2").val(),
			$("#q3").val(),
			$("#q4").val(),
			$("#q5").val(),
			$("#q6").val(),
			$("#q7").val(),
			$("#q8").val(),
			$("#q9").val(),
			$("#q10").val()
	  	]
	  };
	// post route to send the created object to /api/friends
      $.post("/api/friends", newFriend)
      .then(function(data, response) {
		// getting response from post route on apiroutes.js and using the returned object + jquery to put the match on the modal
		$("#match-name").text(data.name);
		$("#match-photo").attr("src", data.photo);
		// showing the modal
		$("#mymodal").modal("show");
	  });


	}
	});
	
</script>
</body>
</html>